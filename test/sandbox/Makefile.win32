# -*- makefile -*-

SOURCES = $(wildcard *.cpp)
EXECUTABLES = $(SOURCES:.cpp=.exe)
DEBUG_OBJECTS = $(SOURCES:.cpp=.d.obj)
RELEASE_OBJECTS = $(SOURCES:.cpp=.r.obj)
DEPENDS = $(SOURCES:.cpp=.d.d) $(SOURCES:.cpp=.r.d)

DEBUG_LDADD = ..\..\src\libshd.lib # $(LIBPNG_DIR)\lib\libpng.dll.a 
RELEASE_LDADD = ..\..\src\libsh.lib # $(LIBPNG_DIR)\lib\libpng.dll.a 

CLEANFILES = $(EXECUTABLES) *.pdb *.ilk *.exp

all:

%.exe: %.r.obj
	$(CXX) $(RELEASE_CXXFLAGS) /Fe$@ $< $(RELEASE_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB  $(RELEASE_LDADD) /link

%_d.exe: %.d.obj
	$(CXX)  $(RELEASE_CXXFLAGS) /Fe$@ $< $(RELEASE_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB  $(DEBUG_LDADD) /link

julia.exe: julia.r.obj timer.r.obj
	$(CXX) $(RELEASE_CXXFLAGS) /Fe$@ $< $(RELEASE_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB  $(RELEASE_LDADD) /link

julia_d.exe: julia.d.obj timer.d.obj
	$(CXX)  $(RELEASE_CXXFLAGS) /Fe$@ $^ $(RELEASE_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB  $(DEBUG_LDADD) /link



w32testarb.exe: w32testarb.d.obj
	$(CXX) $(DEBUG_CXXFLAGS) /Fe$@ $< $(DEBUG_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB  $(DEBUG_LDADD)

glutex_d.exe: glutex.d.obj
	$(CXX) $(DEBUG_CXXFLAGS) /Fe$@ $< $(DEBUG_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB $(OPENGL_DIR)\lib\GLUT32.LIB $(DEBUG_LDADD)

glutex_r.exe: glutex.r.obj
	$(CXX) $(RELEASE_CXXFLAGS) /Fe$@ $< $(RELEASE_LDFLAGS) $(OPENGL_DIR)\lib\OPENGL32.LIB $(OPENGL_DIR)\lib\GLUT32.LIB $(RELEASE_LDADD)

libshd.dll: ..\..\src\libshd.dll
	copy $< $@

libsh.dll: ..\..\src\libsh.dll
	copy $< $@

include ../../win32.mk
CPPFLAGS += -I..\..\src 
CPPFLAGS += -DSH_DLLEXPORT=__declspec(dllimport)

include $(DEPENDS)


