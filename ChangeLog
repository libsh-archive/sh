2004-02-19  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShUtility.hpp (ShCompileTimeChecker): Remove unnecessary
	private declarations.

	* src/ShMatrixImpl.hpp: Implemented ShMatrix metadata functions.

	* src/ShMatrix.hpp: Added metadata functions to ShMatrix.

	* src/ShVariableNode.cpp (internal): Implemented these.

	* src/ShVariableNode.hpp: Added "internal" metadata to variable
	nodes.

	* src/ShVariable.cpp (internal): Implemented internal functions.

	* src/ShVariable.hpp: Added "internal" metadata value to
	variables.

2004-02-18  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShConstantImpl.hpp: Ditto.

	* src/ShMatrixImpl.hpp: Ditto.

	* src/ShSpecialType.hpp: Make use of SH_STATIC_CHECK instead of
	ShIntEqual.

	* src/ShAttrib.hpp: Make use of SH_STATIC_CHECK instead of
	ShIntEqual.

	* src/ShLib.hpp: Make use of SH_STATIC_CHECK where we previously
	used ShCheckDims or similar.

	* src/ShUtility.hpp (ShCompileTimeChecker): Added this utility struct.
	(SH_STATIC_CHECK): Add this macro to check a static assertion, and
	if not output a (hopefully somewhat) useful diagnostic (at compile
	time).

2004-02-17  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShVariable.hpp: Added range metadata wrappers to ShVariable.

	* src/ShVariableNode.cpp (setValue): Only notify bound shaders if
	this is actually a uniform (and not, e.g. a constant).
	(range): Added range metadata to ShVariableNodes.

2004 02-17  Bryan Chan <b8chan@uwaterloo.ca>
	* src/ShTransformer.cpp (InputOutputConvertor):
	I am not fit to program. period.
	
2004-02-17  Jack Wang  <jmwang@uwaterloo.ca>
	* src/ShQuaternionImpl.hpp, src/ShQuaternion.hpp:
	Added slerp (spherical linear interpolation) for ShQuaternion.

2004-02-16  Bryan Chan <b8chan@uwaterloo.ca>
	* src/ShAlgebra.hpp (operator>>):
	Removed the default templated >> operator that automatically defines
	>> whenever << is defined with one arg as ShProgram.

	* src/ShTransformer.cpp (convertInputOutput):
	Fixed mishandling of SH_INOUTs.
	
2004-02-15  Bryan Chan <b8chan@uwaterloo.ca>
	* src/ShAlgebra.cpp (connect,combine):
	Small cleanups to use STL list ops for copying inputs/outputs
	Factored out cloneProgram(ShProgram) to ShInternals.hpp

	* src/ShTransformer.?pp, src/ShBackend.?pp, src/ShProgram.cpp,
	  backends/arb/ShArb.?pp, backends/sm/ShSmBackend.?pp
	Cleaned up ShTransformer work.
	Added split input/output/inout and uniform transformations.

	* backends/ShArb.cpp (updateUniform): added split uniform support
	
	* src/ShOptimizer.cpp (solveReachDefs):
	Fixed bug (not clearing m_defNodes)
	
2004-02-13  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* Added the new memory management/texture management code. Too
	many changes to list. Should have kept changelogs while going
	along, but alas.

2004-02-13  Bryan Chan <b8chan@uwaterloo.ca>
	The last stand of the _VAR_

	* src/, util/, backend/: Changed all SH_VAR_* to SH_*

	* src/ShVariableNode.?pp, ShAlgebra.cpp, ShAttrib*,
	ShSpecialType*, ShMatrix.hpp, ShTransformer.cpp:
	Changed following SH_INOUT variables 
	  - typedefs
	  - addition to ShProgram varlists
	  - algebra connect/combine
	  - transformation for incompatible backends
	  - nibbles to use InOut types)

	* src/ShCtrlGraph.cpp: Fixed empty ShProgram problems
	(if parser gives null head/tail, CtrlGraph connects m_entry to m_exit)

	* src/ShTransformer.cpp: Added long constant tuple splitting

	* src/ShLib.hpp: Changed copycast to fillcast
	
2004-02-12  Bryan Chan <b8chan@uwaterloo.ca>
	* src/ShTransformer.?pp:
	Moved backend-specific transformations to the IR here.
	Added basic long tuple support for temporaries.
	
2004-02-12  Jack Wang  <jmwang@uwaterloo.ca>
	* backends/arb/ShArb.cpp, backends/arb/ShArb.hpp, src/ShLib.hpp:
	Implemented ASIN, ACOS and put all the trig code generation stuff into
	one function.

2004-02-10  Jack Wang  <jmwang@uwaterloo.ca>
	* backends/arb/ShArb.cpp:
	Implemented cosine and sine on the vertex shaders.

2004-02-04  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShAttribImpl.hpp, src/ShConstantImpl.hpp, src/ShSpecialType:
	Make type constructors check their size at compile time.

2004-02-02  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* backends/arb/ShArbStream.cpp: Figure out which floating point
	pbuffers extension (ATI or NV) to use automatically.
	Add proper error reporting.

	* src/ShQuaternion.hpp, src/ShQuaternionImpl.hpp: Indented these
	to match the rest of Sh.

2004-02-01  Jack Wang  <jmwang@uwaterloo.ca>
	* src/ShQuaternion.?pp, src/ShQuaternionImpl.hpp:
	Made ShQuaternion a templated class, and hence renamed the cpp file to
	ShQuaternionImpl.hpp.
	
2004-02-01  Jack Wang  <jmwang@uwaterloo.ca>
	* src/ShQuaternion.?pp:
	Added ShQuaternion class with basically the same interface as the one
	in libdemo, but all methods here can be run on shaders.

2004-01-31  Bryan Chan  <b8chan@uwaterloo.ca>
	* util/ShPerlinImpl.hpp: Fixed discontinuity problems.
	  (TODO Sh should print a warning if a temporary is used before 
	   initialization...should be easy to determine after making ud-chains)
	
2004-01-30  Bryan Chan  <b8chan@uwaterloo.ca>
	* util/ShWorley.cpp (EvenOddSort): Made some changes to allow
	  more efficient dead code removal when either distances or gradients
	  are discarded

	* util/ShPerlin.hpp, util/ShPerlinImpl.hpp: Fixed the templatized
	  versions with proper casting code (but still non-working)

	* src/ShAlgebra.?pp (namedConnect, namedCombine):
	  Added connect & combine by name operations. (may be flaky)

	* util/ShKernelLib.hpp (shPhong,shTangentVsh): Cleaned up
	  with the new named combine/connect operators.

  * src/ShNibbles.hpp, ShNibblesImpl.hpp: Added name arguments 
    to give nibble inputs/outputs names (easier named connect/combine)

2004-01-30  Jack Wang  <jmwang@uwaterloo.ca>
	* src/ShNormal.hpp: Added m_isunit flag to ShNormal to identify 
	unit normals, similar to ShVector.hpp.

	* src/ShLibNormal.hpp: Modified normalize and abs to update the
	m_isunit flag.
	
2004-01-29  Jack Wang  <jmwang@uwaterloo.ca>
	* src/ShVector.hpp: Added a m_isunit flag to ShVector, this 
	required changing a number of functions so they can no longer
	be specified by the macros.

	* src/ShLib.hpp: SH_SHLIB_USUAL_OPERATIONS_RETTYPE was broken
	down to normalize, abs, and everything else.  

	* src/ShLibVector.hpp: Modified normalize and abs to update
	the new ShVector m_isunit flag as necessary.

	* src/ShSpecialType.hpp: SH_SPECIAL_TYPE_PARENT was broken down
	to OPEN, CONSTRUCTORS, NON_CONST_METHODS, CONST_METHODS, MEMBERS,
	and CLOSE to allow more flexibility.	
	
2004-01-26  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShRefCount.hpp (ShRefCountable): Actually, the
	ShRefCountable operator=() should not do anything. Realised this
	on the way home. Hence also removed the warning comment at the
	top, since luckily this will actually be the behaviour if a
	derived class provides a operator=() but does not call ours!

	* test/ref.sht: Added this simple test to fix bugs in reference
	counting.

	* src/ShSyntax.cpp (shEndShader): Set ShEnvironment::shader to a
	null pointer when we're done with it, possibly freeing up memory
	earlier.

	* backends/arb/ShArbStream.cpp (execute): More verbose error
	message when input arity does not match output arity.

	* backends/arb/ShArbTexture.cpp (loadDataTexture): Delete the
	new'd array that ShMemoryObject gave to us from the data()
	call. ShMemoryObject will be replaced soon, don't worry...

	* src/ShMemoryObject.cpp (ShDataMemoryObject): How about we
	actually delete the data that we allocate with new? Eh, Bryan?

	* src/ShRefCount.hpp (class ShRefCountable): Have fun recompiling!
	Add an operator=() and copy constructor to ShRefCountable, which
	set the refcount to zero, as it should be. Also added a warning at
	the top to those wishing to implement their own operator=() to
	derived classes.
	Added lots of optional debugging output. This helped me find the
	previous bug.

	* src/ShOptimizer.cpp (buildUdDuChains): Clear ud/du chains before
	we build them, in case there is some cruft in there.

2004-01-26  Bryan Chan  <b8chan@uwaterloo.ca>
	* src/ShNibbles.hpp, src/ShNibblesImpl.hpp: 
	Added some useful nibbles.

	* src/ShAttrib.hpp, src/ShSpecialType.hpp:
	Added typedefs for InputType, OutputType, and TempType for Attribs
	and special types
	
2004-01-21  Bryan Chan  <b8chan@uwaterloo.
	* src/ShRefCount.hpp: fixed count in operator=
	(was releasing ref before acquiring ref, so if the old object
	had the only pointer to the new object, the new object would be
	deleted before assignment)

	* src/ShOptimizer.cpp: small fixes to the Input/Output convertor
2004-01-21  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	The 2601-line patch of doom!
	
	* src/ShTextureNode.hpp (ShTextureDims): Add SH_TEXTURE_RECT enum
	value.

	* src/ShTexture.hpp (ShTextureRect): Add ShTextureRect.

	* src/ShSyntax.cpp (shEndShader): Only attempt to immediately
	compile vertex and fragment programs.

	* src/ShStream.hpp (ShStream): Add non-const begin() and end().

	* src/ShInternals.cpp (repVar): Remove... you guessed it, annoying
	debug output.

	* src/ShAlgebra.cpp (connect): Remove annoying debug output.
	(connect): Remove annoying debug output.
	(replaceUniform): Remove annoying debug output.

	* src/ShLib*.hpp: Add double conversion operators for constant
	types. Tremendously improve the special type macros to actually
	set up constant-overloaded library functions, etc.

	* src/ShAttrib.hpp, src/ShVariable.hpp, ...: Change ShFoo1f to
	actually be a float type, instead of a double.

	* backends/arb/ShArbStream.cpp (execute): Arb stream execution
	works now! At least on nvidia... Hooray! Aka the "Stefanus is
	allowed to sleep again" change. This was a lot more work than this
	puny little ChangeLog entry might suggest.

	* backends/arb/ShArbTexture.cpp, backends/arbShArbReg.cpp: Split
	these out of ShArb.cpp to make it a little more manageable.

	* backends/arb/ShArb.hpp: Added some classes from ShArb.cpp to
	facilitate splitting ShArb.cpp into more manageable chunks.

2004-01-20  Bryan Chan  <b8chan@uwaterloo.ca>
	* src/ShInternals.?pp: Moved ShVariableReplacer here from ShAlgebra

	* src/ShOptimizer.hpp, src/ShOptimizer.cpp, src/ShCtrlGraph.?pp: 
	Added conversion of input and output vars to temps when used 
	in computation.
	
	* util/ShPerlin.hpp, util/ShPerlinImpl.hpp: Templatized and cleaned up 
	the old Perlin code

	* util/ShKernelLib.?pp: moved nibbles outside of ShKernelLib to make
	them easier to use.
	
	* src/ShLib.hpp: Added pos, | for dot product on ShVariableN.

	* src/ShTexture.?pp: changed access operator() methods to const

	* src/ShAttrib.hpp, src/ShSpecialType.hpp: added default ValueType
		
2004-01-19  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* backends/arb/ShArbStream.cpp (execute): Generates fragment
	programs now. All that's left to do is wrestling with pbuffers to
	actually get the "geometry" rendered and read back. Hooray.

	* backends/arb/ShArb.cpp (printSamplingInstruction): Don't output
	a newline.
	(print): When using printSamplingInstruction, use our own line
	numberer to end the line. This will actually add line numbers to
	TEX instructions being output.

	* src/sh.hpp: Added ShChannelNode.hpp, ShChannel.hpp to the list
	of included files.

	* src/ShMemoryObject.cpp (ShDataMemoryObject::setPartialData):
	Implemented this function.

	* src/ShMemoryObject.hpp (ShDataMemoryObject): Added the
	setPartialData() function, used by ArbBackend::execute().

	* backends/sm/ShSmBackend.cpp (execute): Added an empty
	ShSmBackend::execute() imeplementation.

	* backends/arb/ShArbStream.cpp: Beginnings of an
	ArbBackend::execute() implementation.

	* backends/arb/ShArb.hpp (ArbBackend): Added ArbBackend::execute()
	prototype.

	* src/ShBackend.hpp (ShBackend): Added the execute() virtual
	function for stream programs.

	* src/ShCtrlGraph.hpp: Added constant versions of the dfs()
	algorithms.

	* src/Sh{Stream,Channel,ChannelNode}{,Impl}.{c,h}pp: Renamed
	streams to channels, stream lists to streams, removed
	ShCombinedStream, added operators to connect the new dynamic
	streams to ShPrograms, following Mike's new naming suggestions.

2004-01-18  Bryan Chan  <b8chan@cgl.uwaterloo.ca>
	* util/ShWorley.cpp: Added good worley bump-mapping
	
	* backends/ati/ShArb.?pp, backends/sm/ShSmBackend.?pp:
	Changed boolean <,<=,>,>=,==,!= operators to accept vec/vec
	and scalar/vec arguments in addition to original vec/scalar.

	* src/ShFixedManipulator.??: Rewrote these from scratch.
	  Added shDup.
	
2004-01-17  Bryan Chan  <b8chan@cgl.uwaterloo.ca>
	* src/ShFixedManipulator.??: Added shKeep, shLose
	manipulators that support combine with ShProgram and 
	other ShFixedManipulators.

	* src/ShManipulator.?pp, src/ShManipulatorImpl.hpp:
	Reworked all manipulators to take string parameters as well.           

	* src/ShSyntax.hpp, src/ShAlgebra.hpp, util/ShKernelLib.?pp: 
	Added macros to declare vars with names, and updated util 
	nibbles/kernels with names.

	* src/ShManipulatorImpl.hpp: Removed default 0 value for
	extra inputs when connecting an input manipulator
	(Reverts to old behaviour of passing through the channel)

	* src/ShAlgebra.hpp: added >> operator for replaceUniform
	* src/ShAlgebra.cpp: changed connect to handle outputs > inputs
	* src/ShLib.hpp: added pow(x, exp) function
	* src/ShProgram.?pp, src/ShVariableNode.?pp: added methods
	to print variables/variable lists for displaying algebra errors
	
2004-01-15.5  Bryan Chan  <b8chan@enora.cgl.uwaterloo.ca>
	* src/Makefile.am: Added missing headers

	* src/ShManipulator.?pp: Added input manipulation
	  (unsed input channels are given default value of 0)

	* util/ShKernelLib.hpp, util/ShKernelLibImpl.hpp,
	  util/ShKernelLib.cpp: Added a few useful kernels and nibbles

	* src/ShAlgebra.cpp: Changed connect/combine(p,q) to use
	  p's target (instead of "") if p.target == q.target
	
2004-01-15  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* test/stream.cpp: Added initial stream test.

	* src/ShAttrib.hpp (ShAttrib), src/ShSpecialType.hpp
	(ShSpecialType), ...: Added special_type.

	* src/ShStatement.hpp (ShOperation), src/ShStatement.cpp (opInfo):
	Added SH_OP_FETCH for streams.

	* src/ShStream.hpp, src/ShStreamImpl.hpp, src/ShStreamNode.hpp,
	src/ShStreamNode.cpp: Added (the start of) a stream abstraction.

	* test/algebra.sht: Use operator&() instead of operator+() for
	combine().

	* test/test.footer: Massage the control graph dump filename a bit
	to avoid libtool ugliness.

	* src/ShCtrlGraph.hpp (ShCtrlGraphNode): Add private real_dfs()
	template member function.
	(ShCtrlGraphNode::real_dfs): Renamed dfs() to real_dfs().
	(ShCtrlGraphNode::dfs): Added new dfs() function that wraps
	real_dfs() call with clearMarked().
	(ShCtrlGraph::dfs): Remove now unnecessary clearMarked() calls.

2004-01-14  Bryan Chan  <b8chan@enora.cgl.uwaterloo.ca>

	* src/ShManipulator.cpp (operator<<): Changed SEQ to ASN.

	* backends/arb/ShArb.cpp: Added SEQ operation support

	* src/ShManipulator.?pp: Bug fixes (lots of unmentionable idiocy)

	* src/ShAlgebra.cpp, ShVariableNode.?pp : Better error message 
	for invalid ShProgram connect (prints output/input types)

2004-01-14  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShAlgebra.cpp (copyCtrlGraph): Clear head before we do a dfs
	on it. Also, change the /new/ nodes instead of the old ones in the
	successor-changing loop. Furthermore, it would be a good idea to
	copy blocks instead of referring to old ones. Aka the "evidence
	that Stefanus can't code" patch.

2004-01-14  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShProgram.hpp, ...: Rename "shader kind" to "shader target",
	make targets strings instead of ints.

2004-01-12  Bryan Chan  <b8chan@enora.cgl.uwaterloo.ca>

	* src/ShAlgebra.cpp (replaceUniform): Implemented replaceUniform().

	* src/ShAlgebra.hpp: Added replaceUniform prototype.

2003-11-24  Bryan Chan (b8chan@cgl.uwaterloo.ca)
  
	* src/ShMemoryObject.hpp, src/ShMemoryObject.cpp, backends/arb/ShArb.cpp:
	Experimental implementation of memory objects for über buffer support.

	* src/ShTexture.hpp, src/ShTextureImpl.hpp, src/ShTextureNode.hpp,
	src/ShTextureNode.cpp, util/ShPerlin.hpp, util/ShPerlin.cpp: Added
	3D Texture support.

2003-11-21  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShOptimizer.cpp (MoveEliminator): Don't eliminate moves
	where the RHS is negated (that's a legitimate move).
	(CopyPropagator): Assign negations properly in copy propagation.

	* src/ShAlgebra.cpp (copyCtrlGraph): Added a clearMarked() call
	before we do a DFS on the graph node that's to be copied. This
	makes Tibi's life much better.

2003-11-17 Kevin Moule (krmoule@cgl.uwaterloo.ca)

	* backends/arb/ShArb.cpp: re-added Backend instance, accidentally
	removed during WIN32 port

2003-11-16 Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* util/Makefile.am, util/Perlin.cpp, util/Perlin.hpp,
	util/ShPerlin.cpp, util/ShPerlin.hpp, util/ShUtilLib.hpp,
	util/ShWorley.cpp, util/ShWorley.hpp, util/Worley.cpp,
	util/Worley.hpp, util/shutil.hpp: fixed some include bugs in utils
	renamed utils to match other sh files

2003-11-16  Kevin Moule (krmoule@cgl.uwaterloo.ca)

	* src/ShInit.cpp: ifdef's for WIN32 only code...

	* src/Makefile.am: Added ShInit.cpp

	* backends/arb/ShArb.cpp: ifdef's for wglGetProcAddress

2003-11-14  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* util/shutil.hpp: more doc fixing

	* util/Makefile.am, util/Perlin.hpp, util/ShUtilLib.hpp,
	util/shutil.hpp: fixed some doc output bugs

	* doc/Doxyfile, doc/Makefile.am: updated for libshutil

	* config/ltdl.m4: Changed ltdl.m4 back to the version that comes
	with automake 1.4-p6

	* Makefile.am, configure.ac: Added util directory

	* backends/arb/ShArb.cpp, backends/arb/ShArb.hpp: Stefanus' fix
	for write masking. Changed dot product to accept scalars.

	* backends/sm/ShSmBackend.cpp: Changed dot to accept scalars

	* src/ShLib.hpp: Made dot product also accept scalars

	* util/Makefile.am, util/Perlin.cpp, util/Perlin.hpp,
	util/ShUtilLib.hpp, util/Worley.cpp, util/Worley.hpp: Initial
	checkin of utilities including hash functions, Perlin noise and
	Worley textures

2003-11-11  Kevin Moule (krmoule@cgl.uwaterloo.ca)

	* win32/.cvsignore, win32/sh.sln, win32/sh.suo, win32/sh.vcproj:
	WIN32 build files...

	* src/ShMatrix.hpp, src/ShMatrixImpl.hpp: cosmetic changes...

	* src/sh.hpp, src/ShInit.cpp: added ShInit function...

	* backends/arb/ShArb.cpp: sweeping changes for WIN32 build...

2003-11-06  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShMatrix.hpp: fixed shadowed template parameter compile
	warnings in gcc3.3.2

2003-10-31  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShLib.hpp: fixed bug introduced by me to fix another bug (for
	mad dimension checking)

2003-10-31  Kevin Moule (krmoule@cgl.uwaterloo.ca)

	* src/ShOptimizer.hpp: friend classes renamed to struct as per cpp
	file

	* src/ShOptimizer.cpp: unsigned changes for vector::size()

	* src/ShMatrixImpl.hpp: typo

	* src/ShMatrix.hpp: proper syntax for template friend functions

	* src/ShDomTree.hpp: missing header file for std::find()

	* src/ShBitSet.cpp: operator= missing return values...

	* src/ShAlgebra.cpp: for scoping rules for WIN32...

2003-10-30  Kevin Moule (krmoule@cgl.uwaterloo.ca)

	* backends/arb/ShArb.hpp: ArbInst/ArbReg are structs not classes...

	* src/ShVariableNode.cpp: cleanup for warnings generated under WIN32...

	* src/ShToken.hpp: ShTokenArgument is actually a struct...

	* src/ShSwizzle.cpp: warnings and improper C++ syntax under WIN32...

	* src/ShImage.cpp: binary mode fopen needed for WIN32

	* src/ShBitSet.cpp: cleanup for WIN32 warnings...

	* src/ShBackend.cpp: WIN32 changes for ltdl...

2003-10-24  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShAlgebra.cpp: small fix because I can't tell the difference
	  between != and ==

	* src/ShLib.hpp: Added dimension checks for mad, lerp, fmod

	* src/ShLinearAllocator.cpp: Changed linear allocator to use
	multiset

2003-10-22  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* backends/arb/ShArb.cpp, backends/sm/ShSmBackend.cpp, src/ShLib.hpp,
	src/ShStatement.cpp, src/ShStatement.hpp: Added mad (Multiply & Add)
	operation

2003-10-17  Gabriel Renaud (g2renaud@cgl.uwaterloo.ca)

	* src/ShAttrib.hpp, src/ShDomTree.cpp, src/ShDomTree.hpp,
	src/ShMatrix.hpp, src/ShMatrixImpl.hpp, src/ShVariable.cpp,
	src/ShVariable.hpp: Change ShMatrix.hpp, ShAttrib, and ShVariable,
	so that we have matrix operations and output on the console

2003-10-16  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShLib.hpp, src/ShStatement.cpp, src/ShStatement.hpp: Added
	floor, ceil, lerp, fmod.

	* backends/sm/ShSmBackend.cpp: Added ceil, floor, fmod, lerp ops

	* backends/arb/ShArb.cpp, backends/arb/ShArb.hpp: Added abs, ceil,
	floor, fmod, lerp, sle, and sge ops.  Added sin/cos not implemented
	warnings in vertex programs

2003-10-15  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShLinearAllocator.cpp: Fixed allocation for common
	starters/enders

2003-10-13  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShOptimizer.cpp: Backed out changes for error messages

2003-10-08  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* src/ShError.cpp, src/ShError.hpp: Added improved error handling

2003-10-06  Bryan Chan (b8chan@cgl.uwaterloo.ca)

	* backends/sm/ShSmBackend.cpp, src/Makefile.am, src/ShAlgebra.cpp,
	src/ShBitSet.cpp, src/ShEnvironment.cpp, src/ShEnvironment.hpp,
	src/ShException.cpp, src/ShException.hpp, src/ShImage.cpp,
	src/ShOptimizer.cpp, src/ShParser.cpp, src/ShProgram.cpp,
	src/ShSwizzle.cpp, src/ShTokenizer.cpp: Added ShError for error
	handling
	
2003-09-02  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* test/*.sht: Update to use new program specification syntax.
	
	* src/ShBackend.hpp: Make generateCode() take a program kind.

	* backends/arb/ShArb.hpp: Update backend to take program kind in
	generateCode().

	* backends/sm/ShSmBackend.hpp: Update backend to take program kind
	in generateCode().

	* src/ShAlgebra.cpp (connect, combine): Allow generic programs and
	determine the resulting program kind appropriately.

	* src/ShAlgebra.hpp: Use generic programs in lose and keep.

	* src/ShSyntax.cpp (shCompileShader): Add bodies for
	shCompileShader.

	* src/ShSyntax.hpp (SH_VERTEX_PROGRAM, SH_FRAGMENT_PROGRAM):
	Rename to these instead of SH_{VERTEX,FRAGMENT}_SHADER.
	(SH_BEGIN_VERTEX_PROGRAM, SH_BEGIN_FRAGMENT_PROGRAM): Add these.
	(SH_BEGIN_PROGRAM): Allow generic programs (without kinds).
	(shCompileShader): Add these functions.

	* src/ShProgram.hpp, src/ShProgram.cpp: Make shader kinds optional.

2003-08-27  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShAlgebra.hpp: Added operator<<, operator+, lose and keep.

	* src/ShAlgebra.cpp: Added operator<< and operator+ for programs.

	* src/ShOptimizer.hpp, src/ShOptimizer.cpp: Added straightening.
	Loop over optimizations until a fixed point is reached.

	* src/ShCtrlGraph.hpp: Added constructor taking a tail and a head,
	for the ShAlgebra operations.

	* src/sh.hpp: Added ShAlgebra.hpp to included files.

	* src/ShAlgebra.cpp, src/ShAlgebra.hpp: Added combine and connect
	functions.

2003-08-26  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShBitSet.hpp, src/ShBitSet.cpp: Added operator== and operator!=.

	* src/ShLib.hpp (kill): Pass in the extra argument to SH_OP_KIL.

	* src/ShStatement.cpp: Make KIL take one (ignored) argument. This
	is useful for the optimzer. Added OPTBRA instruction info.

	* src/ShStatement.hpp: Data structures for ud/du chains, added
	OPTBRA instruction for the optimizer. Use src[3] instead of src1,
	src2, src3 in ShStatement.

	* src/ShOptimizer.cpp, src/ShOptimizer.hpp: Added du/ud-chain
	construction and dead code elimination. Lots and lots of code.

2003-08-25  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/Makefile.am (CXXFLAGS): Enable optimizations.

	* src/ShStatement.hpp: Add an XPD statement.

	* src/ShVariableNode.cpp (ShVariableNode): Initialize variables
	with 0 in each element.

	* src/ShMatrixImpl.hpp (ShMatrix): Initialize matrices with
	identity matrices.

	* src/ShLib.hpp (cross): Add a cross product routine for 3-tuples.

2003-08-22  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShOptimizer.cpp (copyValue): Improve efficiency slightly.

	* test/bitset.cpp: Added simple bitset test.

	* src/ShBitSet.cpp, src/ShBitSet.hpp: Added ShBitSet class for the
	optimizer.

2003-08-20  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShStatement.cpp (operator<<): Print negations.

	* src/ShBasicBlock.hpp (ShBasicBlock::erase): Return the result of
	the erase operation (i.e. the iterator one past the erased element).

	* src/ShOptimizer.cpp: Improved the iterate-erase loops used in
	the optimizations.

2003-08-19  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShOptimizer.cpp (struct TempFinder): Mark temporaries used
	in branches as necessary.

	* src/ShEnvironment.hpp (struct ShEnvironment): Added the
	optimizationLevel variable indication the level of
	optimizations. Set this to 1 to turn on optimizations.

	* src/ShSyntax.cpp (shEndShader): Run the optimizer after parsing.

	* src/ShOptimizer.hpp, src/ShOptimizer.cpp: Added (simple) copy
	propagation, "move elimination" and unused temporary removal.

2003-08-11  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShAttrib.hpp (operator+=, operator-=): Added these operators
	for Attrib1's to once again avoid having to wrap constants in
	ShConstant1f()s.

	* src/ShLib.hpp: Added SH_SHLIB_CONST* macros and calls to these
	to allow scalar constants in operations not have to be wrapped in
	ShConstant1f(). This should make using the library _far_ more
	convenient :).

2003-08-08  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* src/ShLib.hpp (cond): Allow scalar cond().

	* backends/sm/ShSmBackend.cpp (addBasicBlock): Support scalar COND instructions.

	* backends/arb/ShArb.cpp (genNode): Support scalar COND instructions.

2003-08-07  Stefanus Du Toit  <sjdutoit@uwaterloo.ca>

	* configure.ac, bootstrap, config/*.m4: Split off some useful
	utility functions into their own M4 files, making the configure.ac
	slightly less verbose.

	* doc/Makefile.am: Added proper rules to build the documentation
	and install/upload it as well.
