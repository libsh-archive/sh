#!/bin/sh

rm -rf libltdl

echo "You may ignore messages about updating aclocal.m4."

if test "x${LIBTOOLIZE}" = "x" ; then
    case ${MACHTYPE}
	in *apple*darwin*)
	    LIBTOOLIZE="/sw/bin/glibtoolize --ltdl"
	    ;;
	*)
	    LIBTOOLIZE="libtoolize --ltdl"
    esac
else
    LIBTOOLIZE="$LIBTOOLIZE --ltdl"
fi
export LIBTOOLIZE

if test "x${AUTOMAKE}" = "x" ; then
    case ${MACHTYPE}
	in *apple*darwin*)
	    AUTOMAKE=/sw/bin/automake
	    ;;
	*)
	    AUTOMAKE=automake
    esac
fi
export AUTOMAKE

if test "x${ACLOCAL}" = "x" ; then
    case ${MACHTYPE}
	in *apple*darwin*)
	    AUTOMAKE=/sw/bin/automake
	    ;;
	*)
	    ACLOCAL=aclocal
    esac
fi
export ACLOCAL

# ltdl seems to require these now...
case ${MACHTYPE}
    in *apple*darwin*)
	M4PRFX=/usr/share/aclocal
	M4DEST=config
	;;
    *)
	M4PRFX=/usr/share/libtool
	M4DEST=.
esac
cp $M4PRFX/libtool.m4 $M4DEST
cp $M4PRFX/ltdl.m4 $M4DEST

cat config/*.m4 > acinclude.m4

autoreconf -s -i $*
